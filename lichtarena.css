:root{
  --bg0:#070a12;
  --bg1:#0a1222;
  --panel: rgba(10,16,30,.78);
  --panel2: rgba(10,16,30,.62);
  --stroke: rgba(255,255,255,.08);
  --stroke2: rgba(255,255,255,.14);
  --txt: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.66);
  --good: #7CFFB2;
  --warn: #FFD36A;
  --bad:  #FF6B7A;
  --shadow: 0 12px 40px rgba(0,0,0,.45);
  --r: 18px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;
  color: var(--txt);
  background: radial-gradient(1200px 700px at 30% 15%, rgba(63,102,255,.14), transparent 60%),
              radial-gradient(900px 600px at 80% 20%, rgba(255,210,80,.12), transparent 55%),
              radial-gradient(1000px 700px at 70% 85%, rgba(60,255,190,.10), transparent 60%),
              linear-gradient(180deg, var(--bg0), var(--bg1));
  overflow:hidden;
  overscroll-behavior:none;
  -webkit-tap-highlight-color: transparent;
}

.topbar{
  display:flex;
  align-items:center;
  gap:16px;
  padding:14px 16px;
}
.titleBlock{min-width:180px}
.title{font-size:34px;font-weight:800;letter-spacing:.3px;line-height:1}
.subtitle{margin-top:4px;color:var(--muted);font-size:13px}

.pills{display:flex;flex-wrap:wrap;gap:10px;align-items:center;flex:1}
.pill{
  display:flex;gap:10px;align-items:center;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,.22);
  box-shadow: 0 8px 24px rgba(0,0,0,.25);
}
.pillKey{color:var(--muted);font-size:13px}
.pillVal{font-size:13px;white-space:nowrap}

.uiToggle{
  border-radius:12px;
  padding:10px 12px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,.25);
  color: var(--txt);
  cursor:pointer;
}

.layout{
  display:grid;
  grid-template-columns: 1fr 360px;
  gap:14px;
  padding: 0 14px 14px;
  height: calc(100% - 74px);
}

.boardCol{display:flex;flex-direction:column;gap:12px;min-width:0}
.uiCol{display:flex;flex-direction:column;gap:12px;min-width:0}

.statusBox{
  border:1px solid var(--stroke);
  border-radius: var(--r);
  background: var(--panel2);
  padding: 12px 14px;
  box-shadow: var(--shadow);
}
.statusLine{font-size:14px}
.statusHint{margin-top:6px;color:var(--muted);font-size:12px}

.boardShell{
  position:relative;
  border:1px solid var(--stroke);
  border-radius: var(--r);
  background: rgba(0,0,0,.18);
  box-shadow: var(--shadow);
  overflow:hidden;
  flex:1;
}

.boardViewport{
  position:absolute;
  inset:0;
  overflow:hidden;
  touch-action:none; /* wichtig für Pointer/Pan/Zoom */
  user-select:none;
}

/* dezentes Grid bleibt "fest" (Viewport), World bewegt sich darüber */
.boardViewport::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(to right, rgba(255,255,255,.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,.05) 1px, transparent 1px);
  background-size: 60px 60px;
  opacity:.22;
  pointer-events:none;
}

.world{
  position:absolute;
  inset:0;
  transform-origin: 0 0;
  will-change: transform;
}

.edgesSvg{
  position:absolute;
  inset:0;
  overflow:visible;
  pointer-events:none;
}

.stage{
  position:absolute;
  inset:0;
  transform-origin: 0 0;
}

.cameraBar{
  position:absolute;
  left: 14px;
  bottom: 14px;
  display:flex;
  gap:10px;
  align-items:center;
  padding: 10px 12px;
  border-radius: 999px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,.30);
  backdrop-filter: blur(10px);
}
.zoomReadout{min-width:56px;text-align:center;color:var(--muted);font-weight:700}

.card{
  border:1px solid var(--stroke);
  border-radius: var(--r);
  background: var(--panel);
  box-shadow: var(--shadow);
  padding: 12px;
}
.cardHeader{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.cardTitle{font-weight:800}
.cardMeta{color:var(--muted);font-size:13px}

.turnNav{display:grid;grid-template-columns: 44px 1fr 44px;gap:10px;align-items:center}
.turnInfo{color:var(--muted);font-size:13px;line-height:1.3}

.row{display:flex;gap:10px;align-items:stretch}
.field{flex:1;display:flex;flex-direction:column;gap:6px}
.field label{font-size:12px;color:var(--muted)}
.field input{
  width:100%;
  border-radius: 14px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,.20);
  color: var(--txt);
  padding: 12px 12px;
  font-size:16px;
}

.btn{
  border-radius: 14px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,.22);
  color: var(--txt);
  padding: 12px 14px;
  cursor:pointer;
  font-weight:700;
  box-shadow: 0 10px 24px rgba(0,0,0,.25);
}
.btn:active{transform: translateY(1px)}
.btn.primary{border-color: rgba(120,170,255,.35); background: rgba(40,90,200,.18)}
.btn.danger{border-color: rgba(255,90,106,.35); background: rgba(140,40,60,.18)}

.dot{display:inline-block;width:10px;height:10px;border-radius:50%}
.dot-red{background:#ff5a6a}
.dot-blue{background:#5aa2ff}
.dot-green{background:#2ee59d}
.dot-yellow{background:#ffd250}

/* Nodes */
.node{
  position:absolute;
  width:56px;
  height:56px;
  transform: translate(-50%,-50%);
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(22,28,44,.75);
  box-shadow: 0 10px 20px rgba(0,0,0,.35);
  display:flex;
  align-items:center;
  justify-content:center;
}

.label{
  position:absolute;
  top:6px;
  left:8px;
  font-size: 11px;
  color: rgba(255,255,255,.75);
}

.tokens{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;gap:6px}
.token{
  width:30px;
  height:30px;
  border-radius: 10px;
  border:1px solid rgba(255,255,255,.15);
  box-shadow: 0 10px 16px rgba(0,0,0,.30);
}
.token.selected{outline:2px solid rgba(255,255,255,.85)}

.selectedNode{outline: 2px solid rgba(120,170,255,.65)}

.start-red{border-color: rgba(255,90,106,.55); box-shadow: 0 0 0 1px rgba(255,90,106,.25), 0 12px 26px rgba(255,90,106,.18)}
.start-blue{border-color: rgba(90,162,255,.55); box-shadow: 0 0 0 1px rgba(90,162,255,.25), 0 12px 26px rgba(90,162,255,.18)}
.start-green{border-color: rgba(46,229,157,.55); box-shadow: 0 0 0 1px rgba(46,229,157,.25), 0 12px 26px rgba(46,229,157,.18)}
.start-yellow{border-color: rgba(255,210,80,.55); box-shadow: 0 0 0 1px rgba(255,210,80,.25), 0 12px 26px rgba(255,210,80,.18)}

.lightfield{border-color: rgba(255,210,80,.35)}
.activeLight{box-shadow: 0 0 0 2px rgba(255,210,80,.35), 0 16px 36px rgba(255,210,80,.14)}

.dynamicBarricade{box-shadow: 0 0 0 2px rgba(255,90,106,.25), 0 16px 36px rgba(255,90,106,.14)}
.barricade-fixed{border-color: rgba(255,90,106,.35)}

/* Edges */
.edge{stroke: rgba(120,170,255,.40); stroke-width: 4; stroke-linecap: round}
.gated{stroke: rgba(255,210,80,.55)}
.gateLabelBg{fill: rgba(0,0,0,.55); stroke: rgba(255,255,255,.10); rx: 10; ry: 10}
.gateLabelText{fill: rgba(255,255,255,.85); font-size: 12px}

/* Joker table */
.jokerTable{width:100%; border-collapse:separate; border-spacing:0 8px}
.jokerTable th{color:var(--muted);font-size:12px;text-align:left;padding:0 8px}
.jokerTable td{
  background: rgba(0,0,0,.18);
  border:1px solid var(--stroke);
  padding:10px 10px;
}
.jokerTable td:first-child{border-radius:12px 0 0 12px}
.jokerTable td:last-child{border-radius:0 12px 12px 0; text-align:right; font-weight:800}

/* Responsive: auf kleineren Screens UI als Drawer */
@media (max-width: 980px){
  .layout{grid-template-columns: 1fr; height: calc(100% - 74px)}
  .uiCol{
    position:fixed;
    right: 12px;
    left: 12px;
    bottom: 12px;
    top: 86px;
    max-width: 560px;
    margin-left:auto;
    transform: translateY(110%);
    transition: transform .22s ease;
    z-index: 20;
    padding-bottom: 10px;
    overflow:auto;
  }
  .uiCol.open{transform: translateY(0)}
}
