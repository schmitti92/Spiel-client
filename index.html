<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>Barikade</title>
<link href="styles.css" rel="stylesheet"/>
</head>
<body>
<div class="app">
<header class="topbar">
<div class="brand">
<div class="logo">B</div>
<div>
<div class="title">Barikade</div>
<div class="subtitle">Online â€¢ Server steuert WÃ¼rfel + ZÃ¼ge â€¢ 2â€“3 Spieler</div>
</div>
</div>
<div class="topControls">
<div class="turnPill"><span class="dot" id="turnDot"></span><span id="turnText">â€“</span></div>


<button class="btn" id="endBtn">Zug beenden</button>
<button class="btn" id="skipBtn">Runde aussetzen</button>
<button class="btn" id="resetBtn">Reset</button>
</div>
</header>
<main class="main">
<section class="boardWrap">
<canvas id="c"></canvas>
</section>
<aside class="side">
        <div class="card"><h3>WÃ¼rfel</h3><div class="row" style="gap:10px; align-items:center;"><button class="btn" id="rollBtn">WÃ¼rfeln</button><div class="dicePill">
<div data-face="0" id="diceCube">
<div class="dip p1"><span class="pip"></span></div>
<div class="dip p2"><span class="pip"></span></div>
<div class="dip p3"><span class="pip"></span></div>
<div class="dip p4"><span class="pip"></span></div>
<div class="dip p5"><span class="pip"></span></div>
<div class="dip p6"><span class="pip"></span></div>
<div class="dip p7"><span class="pip"></span></div>
<div class="dip p8"><span class="pip"></span></div>
<div class="dip p9"><span class="pip"></span></div>
</div>
</div></div></div>
        <div class="card"><h3>Joker</h3><div class="row" style="gap:10px; align-items:center;">
<label style="display:flex; gap:8px; align-items:center; font-size:13px; opacity:.9; user-select:none;">
<input id="actionModeToggle" type="checkbox"/>
              Actionâ€‘Modus (Jokerâ€‘Extra)
            </label>
</div></div>
        <div class="card" id="actionCard" style="display:none;">
<div class="actionHeader">
<div class="actionTitle">ðŸŽ´ Actionâ€‘Modus</div>
<div class="actionHint" id="actionHint">â€“</div>
</div>
<!-- Joker als Karten (nur UI) â€“ IDs bleiben gleich, damit keine Logik bricht -->
<div aria-label="Joker" class="jokerCards">
<!-- Choose (falls genutzt) -->
<div class="jokerCard" data-joker="choose">
<div class="jokerTop">
<div class="jokerName">ðŸŽ¯ Choose</div>
<div class="jokerState" id="jokerChooseState">â€“</div>
</div>
<div class="jokerMeta">
<span class="jokerBadge">Status</span>
<span class="jokerHelp">WÃ¤hlt eine Aktion/Option (falls aktiv)</span>
</div>
</div>
<!-- Summe (falls genutzt) -->
<div class="jokerCard" data-joker="sum">
<div class="jokerTop">
<div class="jokerName">âž• Summe</div>
<div class="jokerState" id="jokerSumState">â€“</div>
</div>
<div class="jokerMeta">
<span class="jokerBadge">Status</span>
<span class="jokerHelp">Addiert/Ã¤ndert den Wurf (falls aktiv)</span>
</div>
</div>
<!-- Alle Farben -->
<div class="jokerCard" data-joker="allcolors">
<div class="jokerTop">
<div class="jokerName">ðŸŽ® Alle Farben</div>
<div class="jokerState" id="jokerAllColorsState">â€“</div>
</div>
<div class="jokerMeta">
<span class="jokerBadge">Joker</span>
<span class="jokerHelp">Erlaubt das Bewegen aller Farben (wenn bereit)</span>
</div>
<button class="jokerUse" id="jokerAllColorsBtn" type="button">Alle Farben nutzen</button>
</div>
<!-- Barikade -->
<div class="jokerCard" data-joker="barricade">
<div class="jokerTop">
<div class="jokerName">ðŸ§± Barikade</div>
<div class="jokerState" id="jokerBarricadeState">â€“</div>
</div>
<div class="jokerMeta">
<span class="jokerBadge">Joker</span>
<span class="jokerHelp">Barikade versetzen (wenn bereit)</span>
</div>
<button class="jokerUse" id="jokerBarricadeBtn" type="button">Barikade nutzen</button>
</div>
</div>
<div class="actionEffects">
<div class="actionEffectsLabel">Effekte</div>
<div class="actionEffectsValue" id="actionEffectsState">â€“</div>
</div>
</div>
        <div class="card">
<h3>Status</h3>
<div class="kv"><span>Board</span><span id="boardInfo">â€“</span></div>
<div class="kv"><span>Barikaden</span><span id="barrInfo">â€“</span></div>
</div>
        <div class="card">
<h3>Online</h3>
<div class="muted">Server ist fest hinterlegt. Du brauchst nur noch einen Raumcode.</div>
<div class="kv"><span>Server</span><span id="serverLabel">â€“</span></div>
<label class="lbl">Raumcode</label>
<input class="inp" id="roomCode" placeholder="z.B. A7K3Q2"/>
<div class="row">
<button class="btn" id="hostBtn">Host</button>
<button class="btn" id="joinBtn">Beitreten</button>
<button class="btn" id="leaveBtn">Trennen</button>
<button class="btn" disabled="" id="startBtn">Spiel starten</button>
</div>

<!-- Action-Mode Panel (J1: Anzeige-Only) -->

<!-- Host-Tools: Save/Load (nur sichtbar fÃ¼r Host) -->
<div class="row" id="hostTools" style="margin-top:8px; display:none;">
<button class="btn" id="resumeBtn">Spiel fortsetzen</button>
<button class="btn" id="saveBtn">Save</button>
<button class="btn" id="loadBtn">Load</button>
<button class="btn" id="restoreBtn" title="Stellt den letzten Autoâ€‘Save des Hosts wieder her">Restore</button>
<input accept="application/json" id="loadFile" style="display:none" type="file"/>
</div>
<div class="muted" id="autoSaveInfo" style="margin-top:6px; display:none;">Autoâ€‘Save: â€“</div>
<div class="kv"><span>Status</span><span class="ok" id="netStatus">Offline</span></div>
<div class="kv"><span>Du bist</span><span id="myColor">â€“</span></div>
<div class="kv"><span>Aktive Spieler</span><span id="netPlayers">â€“</span></div>
<div class="kv"><span>Verbindung</span><span id="connStatus">â€“</span></div>
<div class="kv"><span>Warte auf</span><span id="waitReason">â€“</span></div>
<div id="colorPick" style="display:none;">
<div class="lbl">WÃ¤hle deine Farbe</div>
<div class="colorRow">
<button class="btnColor" id="pickRed">Rot</button>
<button class="btnColor" id="pickBlue">Blau</button>
<button class="btnColor" id="pickGreen">GrÃ¼n</button>
<button class="btnColor" id="pickYellow">Gelb</button>
</div>
<div class="muted" style="margin-top:6px;">Farbe bleibt reserviert (Reconnect).</div>
</div>
</div>
      </aside>
</main>
<div class="netBanner" id="netBanner"></div>
<div class="toast" id="toast"></div>
<div class="overlay" id="overlay">
<div class="overlayCard">
<div class="overlayTitle" id="overlayTitle">Hinweis</div>
<div class="overlaySub" id="overlaySub"></div>
<div class="overlayHint" id="overlayHint"></div>
<button class="btn" id="overlayOk">OK</button>
</div>
</div>
</div>
<script src="game.js"></script>
<pre id="debugLog" style="position:fixed;bottom:0;left:0;right:0;max-height:35%;background:#000;color:#0f0;font-size:11px;overflow:auto;z-index:9999;padding:6px;display:none;"></pre>
<button class="btn" id="debugToggle" style="position:fixed;bottom:40%;right:10px;z-index:10000;">Debug</button>
</body>
</html>
