<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lichtarena (Prototype – Offline)</title>
  <link rel="stylesheet" href="./lichtarena.css?v=1" />
</head>
<body>

  <header class="topbar">
    <div class="brand">
      <h1>Lichtarena (Prototype – Offline)</h1>
      <div class="sub">
        Klick auf eine Figur → auswählen. Dann auf ein verbundenes Feld klicken → Zug (1 Schritt). Tore/Gates werden beim Zug geprüft (Würfel muss passen). Licht spawnt zufällig auf freien normalen Feldern.
      </div>
    </div>

    <div class="pills">
      <button id="btnSideToggle" class="iconBtn" title="Sidebar ein-/ausblenden">☰ UI</button>
      <span class="pill">Modus: <strong>Offline lokal</strong></span>
      <span class="pill">Regel: <strong>Board 1 startet mit Licht auf allen Lichtfeldern</strong></span>
      <span class="pill">Am Zug: <span id="hudTurnDot" class="dot red"></span> <strong id="hudTurnName">RED</strong></span>
      <span class="pill">Server-ready: <strong>später leicht umstellbar</strong></span>
    </div>
  </header>

  <main class="layout">

    <!-- BOARD -->
    <section class="boardCard">
      <div class="boardHeader">
        <div id="statusLine" class="statusLine">Status: –</div>
        <div class="hint">Touch: 1 Finger ziehen = verschieben · 2 Finger = pinch-zoom · Maus: Scroll = zoom</div>
      </div>

      <div class="view" id="boardViewport">
        <div id="boardPanZoom" class="stageWrap">
          <svg id="edgesSvg"></svg>
          <div id="stage"></div>
        </div>

        <div class="boardOverlay" aria-label="Zoom Controls">
          <button id="fitBtn" class="fitBtn">Fit</button>
          <button id="btnZoomOut" class="zoomBtn" aria-label="Zoom out">−</button>
          <div class="zoomReadout"><span id="zoomPct">100%</span></div>
          <button id="btnZoomIn" class="zoomBtn" aria-label="Zoom in">+</button>
          <button id="btnZoomReset" class="fitBtn" title="Zoom zurücksetzen">Reset</button>
        </div>

        <div class="linesBadge">
          <button id="btnToggleEdges" class="btn" style="padding:8px 10px; border-radius:12px;">Linien: <span id="hudEdges">AUS</span></button>
        </div>
      </div>
    </section>

    <!-- SIDEBAR -->
    <aside class="side" aria-label="Spielsteuerung">
      <div class="sideScroll">

        <div class="card">
          <div class="row">
            <h3 style="margin:0">Spieler</h3>
            <div class="row" style="gap:8px">
              <span id="playerDot" class="dot red"></span>
              <strong id="playerLabel">RED</strong>
            </div>
          </div>
          <div class="row" style="margin-top:10px">
            <button id="btnPrevTurn" class="btn" title="Vorheriger Spieler">◀</button>
            <button id="btnNextTurn" class="btn" title="Nächster Spieler">▶</button>
          </div>
          <div class="small" style="margin-top:8px">Nächster Schritt: Turn-Logik + Joker-Effekte „scharf“ schalten.</div>
        </div>

        <div class="card">
          <div class="row">
            <h3>Würfel</h3>
            <div class="small">Aktuell: <strong id="hudDice">6</strong></div>
          </div>
          <div class="row" style="margin-top:8px">
            <button id="btnRoll" class="btn">Würfeln</button>
            <input id="diceValue" class="input" type="number" min="1" max="6" value="6" />
          </div>
        </div>

        <div class="card">
          <div class="row">
            <h3>Licht</h3>
            <div class="small">Aktiv: <strong id="hudActiveLights">0</strong> · Gesammelt: <strong id="hudLightTotal">0</strong>/<strong id="hudLightGoal">5</strong></div>
          </div>
          <div class="row" style="margin-top:8px">
            <button id="btnForceSpawnLight" class="btn btnGold">Test: Licht spawnen</button>
          </div>
        </div>

        <div class="card">
          <div class="row">
            <h3>Ereignis</h3>
            <div class="small">Barikaden</div>
          </div>
          <div class="row" style="margin-top:8px">
            <button id="btnSpawnBarricade" class="btn btnDanger">Barikade spawnen</button>
            <button id="btnClearDynamicBarricades" class="btn">Barikaden löschen</button>
          </div>
        </div>

        <div class="card">
          <div class="row">
            <h3>Joker</h3>
            <div class="small">(am Zug)</div>
          </div>
          <table class="table" style="margin-top:8px" aria-label="Joker Übersicht">
            <thead>
              <tr><th>Joker</th><th>Anzahl</th></tr>
            </thead>
            <tbody id="jokerTable"></tbody>
          </table>
        </div>

        <div class="card">
          <div class="row">
            <h3>Debug</h3>
            <div class="small">Local</div>
          </div>
          <div class="row" style="margin-top:8px">
            <button id="btnRestart" class="btn">Restart</button>
            <button id="btnSave" class="btn">Save</button>
          </div>
          <div class="row" style="margin-top:8px">
            <button id="btnLoad" class="btn">Load</button>
            <button id="btnEndTurn" class="btn">Zug beenden</button>
          </div>
        </div>

      </div>
    </aside>

  </main>

  <script src="./game_rules_lights_barricades.js?v=1"></script>
  <script src="./lichtarena_client.js?v=1"></script>
</body>
</html>
