<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Lichtarena</title>
  <link rel="stylesheet" href="./lichtarena.css?v=la4" />
</head>
<body>
  <div class="app" id="appRoot">
    <header class="topbar">
      <div class="brand">
        <div class="title">Lichtarena</div>
        <div class="subtitle">Prototype • Offline • Board: <b id="hudBoardName">–</b></div>
      </div>

      <div class="chips">
        <div class="chip"><span>Modus</span><b id="chipMode">Offline lokal</b></div>
        <div class="chip"><span>Regel</span><b id="chipRule">Board 1 startet mit Licht auf allen Lichtfeldern</b></div>
        <div class="chip turnChip" id="chipTurnWrap">
          <span>Am Zug</span>
          <span class="dot" id="chipDot" data-color="red"></span>
          <b id="chipTurn">RED</b>
        </div>
        <div class="chip"><span>Server-ready</span><b>später leicht umstellbar</b></div>
      </div>
    </header>

    <main class="main">
      <section class="boardPanel">
        <div class="statusbar">
          <div class="statusline" id="statusLine">Status: <span class="good">bereit…</span></div>
          <div class="hint">Touch: 1 Finger ziehen = verschieben • 2 Finger = pinch‑zoom • Maus: Scroll = zoom</div>
        </div>

        <div class="viewport" id="viewport">
          <div class="world" id="world">
            <svg id="edgesSvg" aria-hidden="true"></svg>
            <div id="stage"></div>
          </div>
        </div>

        <div class="bottomControls">
          <div class="group">
            <button class="btn small" id="btnFit">Fit</button>
            <button class="btn small" id="btnZoomOut">−</button>
            <div class="zoom"><b id="hudZoom">100%</b></div>
            <button class="btn small" id="btnZoomIn">+</button>
            <button class="btn small" id="btnResetView">Reset</button>
            <button class="btn small" id="btnToggleLines">Linien: AN</button>
          </div>
          <div class="group">
            <span class="muted tiny">Debug</span>
            <button class="btn small" id="btnRestart">Restart</button>
            <button class="btn small" id="btnSave">Save</button>
            <button class="btn small" id="btnLoad">Load</button>
          </div>
        </div>
      </section>

      <aside class="sidePanel" id="sidePanel">
        <div class="card">
          <div class="row between">
            <h3>Spieler</h3>
            <div class="turnBadge">
              <span class="dot" id="turnDot" data-color="red"></span>
              <span id="turnName">RED</span>
            </div>
          </div>

          <div class="row gap">
            <button class="btn small" id="btnPrevTurn">◀</button>
            <div class="muted center grow">Figur anklicken → auswählen. Dann auf verbundenes Feld klicken = 1 Schritt.</div>
            <button class="btn small" id="btnNextTurn">▶</button>
          </div>
        </div>

        <div class="card">
          <div class="row between">
            <h3>Würfel</h3>
            <div class="muted">Aktuell: <b id="hudDice">6</b></div>
          </div>

          <div class="row gap" style="margin-top:10px;">
            <button class="btn" id="btnRoll">Würfeln</button>
            <div class="grow">
              <div class="muted tiny" style="margin-bottom:6px;">Wert (1–6)</div>
              <input class="input" id="diceValue" type="number" min="1" max="6" value="6" inputmode="numeric" />
            </div>
          </div>
        </div>

        <div class="card">
          <div class="row between">
            <h3>Licht</h3>
            <div class="kpi">
              <span>Aktiv: <b id="hudActiveLights">0</b></span>
              <span>Gesammelt: <b id="hudLightTotal">0</b> / <b id="hudLightGoal">5</b></span>
            </div>
          </div>
          <button class="btn gold" id="btnForceSpawnLight" style="margin-top:10px;">Test: Licht spawnen</button>
        </div>

        <div class="card">
          <div class="row between">
            <h3>Ereignis</h3>
            <div class="muted">Barikaden</div>
          </div>
          <div class="row gap" style="margin-top:10px;">
            <button class="btn danger" id="btnSpawnBarricade">Barikade spawnen</button>
            <button class="btn" id="btnClearDynamicBarricades">Barikaden löschen</button>
          </div>
        </div>

        <div class="card">
          <div class="row between">
            <h3>Joker (am Zug)</h3>
            <div class="muted tiny">Start: 2× je Typ</div>
          </div>

          <div class="tableWrap" style="margin-top:10px;">
            <table class="table" aria-label="Joker Tabelle">
              <thead>
                <tr><th>Joker</th><th class="right">Anzahl</th></tr>
              </thead>
              <tbody id="jokerTableBody"></tbody>
            </table>
          </div>

          <div class="muted tiny" style="margin-top:8px;">(Nur Anzeige – Logik kommt als Nächstes.)</div>
        </div>
      </aside>
    </main>
  </div>

  <script src="./game_rules_lights_barricades.js?v=la4"></script>
  <script src="./lichtarena_client.js?v=la4"></script>
</body>
</html>
