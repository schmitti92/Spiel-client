<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Lichtarena (Prototype – Offline)</title>
  <link rel="stylesheet" href="styles.css?v=3" />
</head>
<body>
  <header class="topbar">
    <div class="titleBlock">
      <div class="title">Lichtarena</div>
      <div class="subtitle">Prototype – Offline</div>
    </div>

    <div class="pills">
      <div class="pill"><span class="pillKey">Modus</span><span class="pillVal">Offline lokal</span></div>
      <div class="pill"><span class="pillKey">Regel</span><span class="pillVal">Board 1 startet mit Licht auf allen Lichtfeldern</span></div>
      <div class="pill"><span class="pillKey">Am Zug</span><span class="pillVal" id="turnBadge"><span class="dot dot-red"></span> <span id="hudTurnColor">RED</span></span></div>
      <div class="pill"><span class="pillKey">Server-ready</span><span class="pillVal">später leicht umstellbar</span></div>
    </div>

    <button id="btnToggleUi" class="uiToggle">☰ UI</button>
  </header>

  <main class="layout" id="layout">
    <section class="boardCol">
      <div class="statusBox" id="statusBox">
        <div class="statusLine" id="statusLine">Status: –</div>
        <div class="statusHint">Touch: 1 Finger ziehen = verschieben · 2 Finger = pinch-zoom · Maus: Scroll = zoom</div>
      </div>

      <div class="boardShell" id="boardShell">
        <div class="boardViewport" id="boardViewport" aria-label="Spielfeld">
          <!-- WICHTIG: Alles, was mit Kamera (Pan/Zoom) mitgehen soll, liegt in #world -->
          <div class="world" id="world">
            <svg id="edgesSvg" class="edgesSvg" xmlns="http://www.w3.org/2000/svg"></svg>
            <div id="stage" class="stage"></div>
          </div>
        </div>

        <div class="cameraBar">
          <button class="btn" id="btnFit">Fit</button>
          <button class="btn" id="btnZoomOut">-</button>
          <div class="zoomReadout"><span id="hudZoom">70%</span></div>
          <button class="btn" id="btnZoomIn">+</button>
          <button class="btn" id="btnResetCam">Reset</button>
          <button class="btn" id="btnToggleLines">Linien: AN</button>
        </div>
      </div>
    </section>

    <aside class="uiCol" id="uiCol">
      <section class="card">
        <div class="cardHeader">
          <div class="cardTitle">Spieler</div>
          <div class="cardMeta"><span class="dot dot-red" id="hudTurnDot"></span> <span id="hudTurnColor2">RED</span></div>
        </div>
        <div class="turnNav">
          <button class="btn" id="btnPrevPlayer">◀</button>
          <div class="turnInfo">Figur anklicken → auswählen. Dann auf verbundenes Feld klicken = 1 Schritt.</div>
          <button class="btn" id="btnNextPlayer">▶</button>
        </div>
      </section>

      <section class="card">
        <div class="cardHeader">
          <div class="cardTitle">Würfel</div>
          <div class="cardMeta">Aktuell: <b id="hudDice">6</b></div>
        </div>
        <div class="row">
          <button class="btn primary" id="btnRoll">Würfeln</button>
          <div class="field">
            <label for="diceValue">Wert (1–6)</label>
            <input id="diceValue" type="number" min="1" max="6" value="6" />
          </div>
        </div>
      </section>

      <section class="card">
        <div class="cardHeader">
          <div class="cardTitle">Licht</div>
          <div class="cardMeta">Aktiv: <b id="hudActiveLights">0</b> · Gesammelt: <b id="hudLightTotal">0</b> / <b id="hudLightGoal">5</b></div>
        </div>
        <button class="btn" id="btnForceSpawnLight">Test: Licht spawnen</button>
      </section>

      <section class="card">
        <div class="cardHeader">
          <div class="cardTitle">Ereignis</div>
          <div class="cardMeta">Barikaden</div>
        </div>
        <div class="row">
          <button class="btn danger" id="btnSpawnBarricade">Barikade spawnen</button>
          <button class="btn" id="btnClearDynamicBarricades">Barikaden löschen</button>
        </div>
      </section>

      <section class="card">
        <div class="cardHeader">
          <div class="cardTitle">Joker (am Zug)</div>
          <div class="cardMeta">Start: 2× je Typ</div>
        </div>
        <table class="jokerTable" aria-label="Joker Übersicht">
          <thead>
            <tr><th>Joker</th><th>Anzahl</th></tr>
          </thead>
          <tbody id="jokerTableBody"></tbody>
        </table>
      </section>

      <section class="card">
        <div class="cardHeader">
          <div class="cardTitle">Debug</div>
          <div class="cardMeta">Offline</div>
        </div>
        <div class="row">
          <button class="btn" id="btnRestart">Restart (Board neu laden)</button>
          <button class="btn" id="btnSave">Save Local</button>
          <button class="btn" id="btnLoad">Load Local</button>
        </div>
      </section>
    </aside>
  </main>

  <script src="game_rules_lights_barricades.js?v=3"></script>
  <script src="lichtarena_client.js?v=3"></script>
</body>
</html>
