<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Lichtarena â€“ Tournament UI</title>
  <link rel="stylesheet" href="./lichtarena.css?v=1" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brandTitle">Lichtarena</div>
      <div class="brandSub">Prototype â€“ Offline</div>
    </div>

    <div class="topPills" role="status" aria-label="Status">
      <span class="pill"><span class="pillKey">Modus</span> Offline lokal</span>
      <span class="pill"><span class="pillKey">Regel</span> Board 1 startet mit Licht auf allen Lichtfeldern</span>
      <span class="pill pillTurn"><span class="pillKey">Am Zug</span> <span id="turnBadge" class="turnBadge"><span class="dot"></span><span id="turnLabel">RED</span></span></span>
      <span class="pill"><span class="pillKey">Server-ready</span> spÃ¤ter leicht umstellbar</span>
    </div>

    <button id="btnToggleUi" class="ghostBtn" type="button" aria-label="UI ein-/ausblenden">â‰¡ UI</button>
  </header>

  <main class="shell">
    <!-- BOARD -->
    <section class="boardPanel">
      <div class="boardHeader">
        <div class="statusLine"><span class="muted">Status:</span> <span id="statusLine">â€“</span></div>
        <div class="hintLine" id="hintLine">Touch: 1 Finger ziehen = verschieben Â· 2 Finger = pinch-zoom Â· Maus: Scroll = zoom</div>
      </div>

      <div id="boardShell" class="boardViewport" aria-label="Spielbrett">
        <svg id="edgesSvg" class="edgesSvg" aria-hidden="true"></svg>
        <div id="stage" class="stage" aria-label="Felder"></div>

        <!-- Camera controls -->
        <div class="camHud" aria-label="Zoom und Linien">
          <button id="btnFit" class="hudBtn" type="button">Fit</button>
          <button id="btnZoomOut" class="hudBtn" type="button">âˆ’</button>
          <div id="zoomPct" class="hudPct">100%</div>
          <button id="btnZoomIn" class="hudBtn" type="button">+</button>
          <button id="btnResetView" class="hudBtn" type="button">Reset</button>
          <button id="btnToggleLines" class="hudBtn hudBtnWide" type="button">Linien: <span id="linesState">AUS</span></button>
        </div>
      </div>
    </section>

    <!-- UI -->
    <aside id="uiPanel" class="uiPanel" aria-label="Spielsteuerung">
      <div class="uiStack">

        <section class="card">
          <div class="cardHead">
            <div class="cardTitle">Spieler</div>
            <div class="cardMeta"><span class="turnDot" id="turnDot"></span><span id="turnText">RED</span></div>
          </div>
          <div class="cardBody row">
            <button id="btnPrevTurn" class="btnIcon" type="button" aria-label="Vorheriger Spieler">â—€</button>
            <div class="turnInfo">Figur anklicken â†’ auswÃ¤hlen. Dann auf verbundenes Feld klicken = 1 Schritt.</div>
            <button id="btnNextTurn" class="btnIcon" type="button" aria-label="NÃ¤chster Spieler">â–¶</button>
          </div>
        </section>

        <section class="card">
          <div class="cardHead">
            <div class="cardTitle">WÃ¼rfel</div>
            <div class="cardMeta">Aktuell: <span id="hudDice">6</span></div>
          </div>
          <div class="cardBody row">
            <button id="btnRoll" class="btnPrimary" type="button">WÃ¼rfeln</button>
            <label class="field">
              <span class="fieldLabel">Wert (1â€“6)</span>
              <input id="diceValue" class="input" type="number" min="1" max="6" step="1" value="6" />
            </label>
          </div>
        </section>

        <section class="card">
          <div class="cardHead">
            <div class="cardTitle">Licht</div>
            <div class="cardMeta">Aktiv: <span id="hudActiveLights">0</span> Â· Gesammelt: <span id="hudLightTotal">0</span>/<span id="hudLightGoal">5</span></div>
          </div>
          <div class="cardBody">
            <button id="btnForceSpawnLight" class="btnSecondary" type="button">Test: Licht spawnen</button>
          </div>
        </section>

        <section class="card">
          <div class="cardHead">
            <div class="cardTitle">Ereignis</div>
            <div class="cardMeta">Barikaden</div>
          </div>
          <div class="cardBody row">
            <button id="btnSpawnBarricade" class="btnDanger" type="button">Barikade spawnen</button>
            <button id="btnClearDynamicBarricades" class="btnSecondary" type="button">Barikaden lÃ¶schen</button>
          </div>
        </section>

        <section class="card">
          <div class="cardHead">
            <div class="cardTitle">Joker (am Zug)</div>
            <div class="cardMeta">Start: 2Ã— je Typ</div>
          </div>
          <div class="cardBody">
            <table class="jokerTable" aria-label="Joker Ãœbersicht">
              <thead>
                <tr><th>Joker</th><th class="right">Anzahl</th></tr>
              </thead>
              <tbody id="jokerTableBody">
                <tr><td>1) Neuwurf</td><td class="right">2</td></tr>
                <tr><td>2) Alle Farben</td><td class="right">2</td></tr>
                <tr><td>3) Doppelwurf</td><td class="right">2</td></tr>
                <tr><td>4) Barikade versetzen</td><td class="right">2</td></tr>
                <tr><td>5) Durch Barikade</td><td class="right">2</td></tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="card">
          <div class="cardHead">
            <div class="cardTitle">Debug</div>
            <div class="cardMeta">Local</div>
          </div>
          <div class="cardBody row">
            <button id="btnRestart" class="btnSecondary" type="button">Restart</button>
            <button id="btnSave" class="btnSecondary" type="button">Save</button>
            <button id="btnLoad" class="btnSecondary" type="button">Load</button>
            <button id="btnEndTurn" class="btnSecondary" type="button">Zug beenden</button>
          </div>
        </section>

      </div>
    </aside>
  </main>

  <script src="./game_rules_lights_barricades.js"></script>
  <script src="./lichtarena_client_BOARD1_v1.js?v=1"></script>
  <script>
    // UI collapse (purely visual; no game logic)
    (function(){
      const ui = document.getElementById('uiPanel');
      const btn = document.getElementById('btnToggleUi');
      if(!ui || !btn) return;
      btn.addEventListener('click', ()=>{
        ui.classList.toggle('hidden');
        btn.textContent = ui.classList.contains('hidden') ? 'â‰¡ UI' : 'â¨¯ UI';
      });
    })();
  </script>

  <!-- Joker Wheel Overlay -->
  <div id="wheelOverlay" class="overlay hidden" aria-hidden="true">
    <div class="overlayCard" role="dialog" aria-modal="true" aria-label="GlÃ¼cksrad">
      <div class="overlayTitle">ðŸŽ¡ GlÃ¼cksrad â€“ Joker Gewinn</div>
      <div class="wheelWrap">
        <div id="wheel" class="wheel">
          <div class="seg s1"><span>1) Neuwurf</span></div>
          <div class="seg s2"><span>2) Alle Farben</span></div>
          <div class="seg s3"><span>3) Doppelwurf</span></div>
          <div class="seg s4"><span>4) Barikade versetzen</span></div>
          <div class="seg s5"><span>5) Durch Barikade</span></div>
        </div>
        <div class="wheelPointer">â–¼</div>
      </div>
      <div id="wheelResult" class="overlayResult">drehtâ€¦</div>
      <div class="overlayHint">Der aktive Spieler bekommt den Joker. Keine Nieten.</div>
      <button id="wheelBtnClose" class="btn primary" disabled>OK</button>
    </div>
  </div>

</body>
</html>
